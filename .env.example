# KCS Environment Configuration
# Copy this file to .env and customize the values for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Settings
POSTGRES_DB=kcs
POSTGRES_USER=kcs
POSTGRES_PASSWORD=kcs_dev_password_change_in_production
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Database connection URL (automatically constructed from above, or override)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Settings
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis connection URL (automatically constructed from above, or override)
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# =============================================================================
# KCS MCP SERVER CONFIGURATION
# =============================================================================

# Authentication
JWT_SECRET=dev_jwt_secret_change_in_production_use_64_char_random_string

# Server Settings
KCS_HOST=0.0.0.0
KCS_PORT=8080
LOG_LEVEL=INFO

# Performance Settings
KCS_WORKERS=4
KCS_MAX_CONNECTIONS=100
KCS_REQUEST_TIMEOUT=30

# Indexing Configuration
KCS_KERNEL_PATH=/usr/src/linux
KCS_DEFAULT_CONFIG=x86_64:defconfig
KCS_MAX_INDEX_TIME=1200
KCS_MAX_INCREMENTAL_TIME=180

# =============================================================================
# DATA DIRECTORIES (host bind mounts)
# =============================================================================

# Base data directory (all persistent data will be stored here)
KCS_DATA_DIR=./data

# Individual service data directories
POSTGRES_DATA_DIR=${KCS_DATA_DIR}/postgres
REDIS_DATA_DIR=${KCS_DATA_DIR}/redis
GRAFANA_DATA_DIR=${KCS_DATA_DIR}/grafana
PROMETHEUS_DATA_DIR=${KCS_DATA_DIR}/prometheus

# Kernel indexing data
KCS_INDEX_DATA_DIR=${KCS_DATA_DIR}/kcs-index
KCS_CACHE_DIR=${KCS_DATA_DIR}/cache

# Log directories
KCS_LOG_DIR=${KCS_DATA_DIR}/logs
POSTGRES_LOG_DIR=${KCS_LOG_DIR}/postgres
REDIS_LOG_DIR=${KCS_LOG_DIR}/redis

# =============================================================================
# EXTERNAL PORTS (for host binding)
# =============================================================================

# PostgreSQL port (host:container)
POSTGRES_EXTERNAL_PORT=5432

# Redis port (host:container)
REDIS_EXTERNAL_PORT=6379

# KCS MCP server port (host:container)
KCS_EXTERNAL_PORT=8080

# Grafana port (host:container)
GRAFANA_EXTERNAL_PORT=3000

# Prometheus port (host:container)
PROMETHEUS_EXTERNAL_PORT=9090

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Grafana Settings
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin_change_in_production

# Prometheus Settings
PROMETHEUS_RETENTION_TIME=200h
PROMETHEUS_SCRAPE_INTERVAL=15s

# =============================================================================
# DEVELOPMENT/PRODUCTION FLAGS
# =============================================================================

# Environment mode
ENVIRONMENT=development

# Debug settings
DEBUG=false
ENABLE_PROFILING=false

# Security settings (production)
SECURE_COOKIES=false
CORS_ORIGINS=*

# =============================================================================
# DOCKER COMPOSE PROFILES
# =============================================================================

# Available profiles: app, monitoring
# Use with: docker compose --profile app --profile monitoring up -d
COMPOSE_PROFILES=

# =============================================================================
# OPTIONAL INTEGRATIONS
# =============================================================================

# External LLM API for summaries (optional)
OPENAI_API_KEY=
ANTHROPIC_API_KEY=

# Webhook endpoints for notifications (optional)
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=

# External storage (optional)
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Database connection pool
DB_POOL_SIZE=20
DB_POOL_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# Redis connection pool
REDIS_POOL_SIZE=10
REDIS_POOL_MAX_CONNECTIONS=50

# Memory limits (for Docker)
POSTGRES_MEMORY_LIMIT=2g
REDIS_MEMORY_LIMIT=512m
KCS_MEMORY_LIMIT=1g

# CPU limits (for Docker)
POSTGRES_CPU_LIMIT=2.0
REDIS_CPU_LIMIT=1.0
KCS_CPU_LIMIT=2.0
